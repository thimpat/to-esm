<span style="font-size:40px;">ğŸ’¡</span>

## Create a Hybrid Library with to.esm !heading

<br><br>


### 1- Use the .cjs extensions instead of .js

```
ğŸ“project  
â””â”€â”€â”€ ğŸ“ index.cjs                â¬… ğŸš©
â””â”€â”€â”€ ğŸ“ package.json
â””â”€â”€â”€ ğŸ“example
â”‚    â”‚
â”‚    â””â”€â”€â”€ğŸ“code
â”‚        â””â”€â”€â”€   ğŸ“ library.cjs   â‡½ ğŸš©
â”‚               ...
â”‚
â””â”€â”€â”€ ğŸ“ node_modules
â”‚    â””â”€â”€ ...
         
```


<br/>



### 2- Run to-esm against the entry point

```shell
to-esm --entrypoint index.cjs --update-all
```

> ğŸš«
_The option --update-all will modify your package.json to make it point to your entrypoint._
> ```javascript
> // Will point to .index.cjs
> require("your-module-name")
>  
> // Will point to .index.mjs
> import("your-module-name") 
> ```

---


###### Click on the arrow to expand or collapse
<details><summary><strong>â³ Before...</strong></summary>

ğŸ“ ./package.json â†´
```json
{
  "name": "my-project",
  "main": "./index.cjs",
  "scripts": {
    "build": "to-esm --entrypoint index.cjs"
  },
  "devDependencies": {
    "to-esm": "file:.."
  }
}
```

ğŸ“ ./index.cjs â†´
```javascript
const hi = require("./example/code/library.cjs");
hi();
```

ğŸ“ ././example/code/library.cjs â†´
```javascript
function hi()
{
    console.log(`I wanted to say hi!`)
}

module.exports = hi;
```

</details>

---

<details><summary><strong>âŒ› After...</strong></summary>

ğŸ“ ./package.json â†´
```json
{
  "name": "my-project",
  "main": "./index.cjs",
  "scripts": {
    "build": "to-esm --entrypoint index.cjs"
  },
  "devDependencies": {
    "to-esm": "file:.."
  },
  "module": "./index.mjs",        â¬… ğŸš©
  "type": "module",               â¬… ğŸš© // (Change to commonjs if you don't want to use .cjs extension)
  "exports": {
    ".": {
      "require": "./index.cjs",   â¬… ğŸš©
      "import": "./index.mjs"     â¬… ğŸš©
    }
  }
}

```


ğŸ“ ./index.mjs â†´
```javascript
/**
 * DO NOT EDIT THIS FILE DIRECTLY.
 * This file is generated following the conversion of
 * [./index.cjs]{@link ./index.cjs}
 *
 **/
import hi  from "./example/code/library.mjs";
hi();
```

ğŸ“ ././example/code/library.mjs â†´
```javascript
/**
 * DO NOT EDIT THIS FILE DIRECTLY.
 * This file is generated following the conversion of
 * [./example/code/library.cjs]{@link ./example/code/library.cjs}
 *
 **/
function hi()
{
    console.log(`I wanted to say hi!`)
}

export default hi;
```

</details>

<br/>



### 3- Your code is generated.

To test it in NodeJs.

```shell
node index.mjs
```

